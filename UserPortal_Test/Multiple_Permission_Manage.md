# 多级权限管理 

<table>
<thead>
<tr>
 <th width="10%">用例编号</th>
 <th width="45%">操作</th>
 <th width="15%">预期结果</th>
 <th width="15%">实际结果</th>
 <th width="15%">备注</th>
</tr>
</thead>
<tbody>
<tr>
 <td>309</td>
 <td>
     前提条件：至少有一个的存储域(无论状态)<br/>
     <br/>
     <ol style="list-style-type:decimal">
         <li> 在左侧树形面板中点击【展开所有】按键，在默认数据中心下的默认集群，点击选择               【存储】 <br/>
         </li>
         <br/>
         <li>在右侧的详细列表中，选择要分配存储管理角色的存储，点击该存储的【权限】子标              签 
         </li><br/> 
         <li> 点击子标签菜单中的【添加】按键，在弹出的【为用户添加权限】窗口中，在搜索下               拉菜单中选择要搜索的域，命名空间下拉菜单中选择*，点击【执行】 
         </li><br/>
         <li>  搜索结果中显示该域下所有的用户，勾选要分配角色的用户 
         </li><br/>
         <li> 在窗口下方的【要分配的角色】下拉菜单中选择【StorageAdmin】，点击【确定】 
         </li><br/>
         <li> 为存储分配存储管理角色完成，看到【权限】子标签下的列表中显示存储管理的信息
         </li><br/>
         </li><br/>
     </ol>
 </td>
 <td>为用户成功赋予StorageAdmin角色。</td>
 <td>ok</td>
 <td>为存储域分配存储管理员角色 </td>
</tr>
<tr>
 <td>310</td>
 <td>
     前提条件：至少有一台虚拟机(无论状态)<br/>
     <br/>
     <ol style="list-style-type:decimal">
         <li> 再左侧树形面板中点击【展开所有】按键，在默认数据中心下的默认集群，点击选择              【虚拟机】  <br/>
         </li>
         <br/>
         <li>在右侧的详细列表中，选择要分配权限的虚拟机，点击该虚拟机的【权限】子标签 
         </li><br/> 
         <li> 点击子标签菜单中的【添加】按键，在弹出的【为用户添加权限】窗口中，在搜索下               拉菜单中选择要搜索的域，命名空间下拉菜单中选择*，点击【执行】
         </li><br/>
         <li>  搜索结果中显示该域下所有的用户，勾选要分配角色的用户 
         </li><br/>
         <li> 在窗口下方的【要分配的角色】下拉菜单中选择【PowerUserRole】，点击【确定】 
         </li><br/>
         <li> 为虚拟机分配虚拟机管理员角色完成，看到【权限】子标签下的列表中显示虚拟机管               理员的信息
         </li><br/>
     </ol>
 </td>
 <td>成功为用户赋予虚拟机的PowerUserRole角色。</td>
 <td>ok</td>
 <td>虚拟机管理员 </td>
</tr>
<tr>
 <td>311</td>
 <td>
     前提条件：已经给用户分配了权限<br/>
     <br/>
     <ol style="list-style-type:square">
     验证存储管理（StorageAdmin）角色 <br/>
     <ol style="list-style-type:decimal">
         <li> 用存储管理的角色登录管理门户 <br/>
         </li>
         <br/>
         <li> 在左侧的树形面板中点击【展开所有】按键，在默认数据中心下的默认集群中，点击               选择【存储】  
         </li><br/> 
         <li> 在右侧的详细列表中，选择属于该用户管理的存储域，此时该存储域的状态为Active              （或Inactive均可）
         </li><br/>
         <li>  点击该存储域的【数据中心】子标签，在其子标签的菜单中点击【维护】（如果是I                nactive则点击【激活】）按键  
         </li><br/>
         <li> 存储域能够维护（激活）成功，存储域的状态变化为Preparing For Maintenance ->               Maintenance（或Activing -> Active） 
         </li><br/>
         <li> 点击选择不属于该用户管理的存储域，此时该存储域的状态为Active（或Inactive均               可）
         </li><br/>
         <li>点击该存储域的【数据中心】子标签，在其子标签的菜单中点击【维护】（如果是
         Inactive则点击【激活】）按键
         </li><br/>
         <li>存储域不能维护（激活）成功，弹出错误提示框，提示信息为：“执行时出错：没有授              权用户执行这个动作。”表明存储管理员对不属于自己管理的存储域没有操作的权限 
         </li><br/>
 </td>
 <td>用户权限验证成功。</td>
 <td>ok</td>
 <td>用户权限验证  </td>
</tr>
<tr>
 <td>312</td>
 <td>
     <ol style="list-style-type:decimal">
         <li> 以超级用户登录到管理门户，在管理端右上角处，点击【配置】  <br/>
         </li>
         <br/>
         <li>弹出【配置】对话框，在【角色】标签下点击【新建】按键 
         </li><br/> 
         <li> 在弹出的【新建角色】窗口中，输入角色的名称、描述
         </li><br/>
         <li>  选择账户类型：用户或管理员 
         </li><br/>
         <li>  在选择复选框以允许动作的窗口中，点击【展开所有】，根据实际需要，勾选角色                所拥有的权限 
         </li><br/>
         <li> 完成定义后点击【确定】，在【配置】的右侧列表中显示所新建的角色的信息，该权               限能够被分配
         </li><br/>
     </ol>
 </td>
 <td>自定义角色成功。</td>
 <td>ok</td>
 <td>自定义角色  </td>
</tr>
</tbody>
</table>
