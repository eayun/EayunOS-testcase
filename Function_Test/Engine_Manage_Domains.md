# 域控管理（Engine-Manage-Domains）

* 摘要
  * 实现了在EayunOS虚拟化管理中心里通过UI进行域控管理的操作，而不需要使用命令行操作。
  * 但为了能够使用，必须对其进行初始化。


|用例编号|测试目的|操作|预期结果|实际结果|备注|
|--------|--------|----|--------|--------|----|
|39|域控管理的初始化|<ol><li>以root身份SSH到EayunOS管理端虚拟机</li><li>执行命令`engine-manage-domains-setup`</li><li>在DNS中配置好对目录服务器的域名解析</li></ol>|<ol><li>提示`Setup proccess completed.`，说明初始化成功</li></ol>| | |
|40|通过域控管理添加域（直接使用密码）|<ol><li>登录到EayunOS虚拟化管理中心，点击【域】选项卡</li><li>等待【刷新】按键刷新完毕后，点击菜单中的【新建】按键</li><li>在弹出的【Add Domain】对话框中，输入域，选择提供商，输入用户名、密码，勾选【显示密码】以显示你所输入的密码，核对是否输入正确</li><li>可以点击【高级参数】，展开高级配置选项，为所添加的用户添加权限等</li><li>点击【Ok】</li></ol>|<ol><li>提示域添加成功，并提示重启engine服务</li><li>在列表中显示新添加的域的信息</li><li>添加域成功后，可以使用该域中的用户，并为用户分配权限</li></ol>| |域添加成功后需要重启engine服务，才能添加的域生效。可以运行`service ovirt-engine restart`以重启engine服务|
|41|通过域控管理添加域（使用密码文件）|<ol><li>SSH到EayunOS虚拟化管理中心，新建一个密码文件，如：password.txt，在文件中写入密码内容</li><li>将密码文件保存在某个路径下，如/tmp/password.txt</li><li>登录到EayunOS虚拟化管理中心，点击【域】选项卡</li><li>等待【刷新】按键刷新完毕后，点击菜单中的【新建】按键</li><li>在>    弹出的【Add Domain】对话框中，输入域，选择提供商，输入用户名</li><li>点击【高级参数】，展开高级配置选项，在【密码文件】中输入在EayunOS虚拟化管理中心所保存的密码文件的绝对路径，如/tmp/password.txt</li><li>点击【Ok】</li></ol>|<ol><li>提示域添加成功，并提示重启engine服务</li><li>在列表中显示新添加的域的信息</li><li>添加域成功后，可以使用该域中的用户，并为用户分配权限</li></ol>| |域添加成功后需要重启engine服务，才能添加的域生效。可以运行`service ovirt-engine restart`以重启engine服务|
|42|通过域控管理编辑域|<ol><li>在列表中点击要编辑的域的【编辑】按钮</li><li>在弹出的【Edit [domian_name]】对话框中，可以对域的密码、用户权限、配置文件等进行编辑</li><li>点击【Ok】</li></ol>|<ol><li>域编辑成功，列表中的域信息更新</li></ol>| |域的名称是不可修改的|
|43|通过域控管理删除域|<ol><li>在列表中点击要删除的域的【删除】按钮</li><li>弹出提示框询问是否确定删除，点击【确定】</li></ol>|<ol><li>域删除成功，提示重启engine服务并删除所有使用了管理门户或API的域的用户和组</li></ol>||<ol><li>删除域后，需要删除所有使用了管理门户或API的域的用户和组</li><li>域删除成功后需要重启engine服务</li></ol>|

