# 虚拟机磁盘

|用例编号|操作|预期结果|实际结果|备注|
|--------|----|--------|--------|----|
|159|添加内部的虚拟机磁盘<br/><br/>1.  在虚拟机标签列表下, 指定虚拟机.<br/><br/>2.  在该虚拟机详细面板下点击磁盘.<br/><br/>3.  点击菜单内的添加.<br/><br/>4.  设置大小, 描述, 点击确定<br/><br/>|磁盘列表下显示新添加的磁盘.|||<br/>|67.1|添加附加的虚拟机磁盘<br/><br/>1.  点击磁盘标签.<br/><br/>2.  点击添加.<br/><br/>3.  在添加虚拟磁盘窗口, 设置大小, 别名(Disk1), 描述, 点击确定.<br/><br/>4.  在虚拟机标签列表下, 指定虚拟机.<br/><br/>5.  在该虚拟机详细面板下点击磁盘.<br/><br/>6.  点击菜单内的添加.<br/><br/>7.  勾选附加磁盘, 勾选 Disk1, 点击确定.<br/><br/>|磁盘列表下显示新添加的磁盘 Disk1.|||<br/>|67.2|添加外部的虚拟机磁盘<br/><br/>1.  在虚拟机标签列表下, 指定虚拟机.<br/><br/>2.  在该虚拟机详细面板下点击磁盘.<br/><br/>3.  点击菜单内的添加.<br/><br/>4.  勾选外部(直接 LUN).<br/><br/>5.  设置别名.<br/><br/>6.  点击发现目标, 填写 iSCSI 的地址, 和端口, 点击发现.<br/><br/>7.  在列出的目标列表中, 选择要登陆的目标, 点击登陆.<br/><br/>8.  点击登陆后的目标的+, 展开目标的 LUN.<br/><br/>9.  勾选要加入的 LUN, 点击确定.<br/><br/>|磁盘列表下显示新添加的 LUN.|||
|160|Move数据域之间磁盘迁移（前提：该数据中心下至少有两 个Data Domain）<br/><br/>1.  在虚拟机列表下，指定虚拟机（独立虚拟机并且<br/>    非虚拟机池内分离出来的虚拟机状态为运行状态）<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  选中该列表显示的磁盘，点击菜单内的Move<br/><br/>4.  在Move Disk（s）,下选择目标Data Domain<br/><br/>5.  点击OK<br/><br/>|迁移成功|||
|161|Move数据域之间磁盘迁移（前提：该数据中心下至少有两 个Data Domain）<br/><br/>1.  在虚拟机列表下，指定虚拟机（独立虚拟机并且<br/>    非虚拟机池内分离出来的虚拟机状态状态为关闭 状态）.<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  选中该列表显示的磁盘，点击菜单内的Move<br/><br/>4.  在Move Disk（s）,下选择目标Data Domain<br/><br/>5.  点击OK<br/><br/>|磁盘迁移成功|||
|162|Move数据域之间磁盘迁移（前提：该数据中心下至少有两 个Data Domain）<br/><br/>1.  在虚拟机列表下，指定虚拟机（虚拟机池内的虚 拟机状态为运行状态）<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  选中该列表显示的磁盘，点击菜单内的Move<br/><br/>4.  在Move Disk（s）,下选择目标Data Domain<br/><br/>5.  点击OK<br/><br/>|虚拟机池内运行状态的虚拟机不能迁移|||
|163|Move数据域之间磁盘迁移（前提：该数据中心下至少有两 个Data Domain）<br/><br/>1.  在虚拟机列表下，指定虚拟机（虚拟机池内分离 的虚拟机状态为关闭状态）<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  选中该列表显示的磁盘，点击菜单内的Move<br/><br/>4.  在Move Disk（s）,下选择目标Data Domain<br/><br/>5.  点击OK<br/><br/>|不能迁移，目标存储域为空且不能编辑|||
|164|Move数据域之间磁盘迁移（前提：该数据中心下至少有两 个Data Domain）<br/><br/>1.  在虚拟机列表下，指定虚拟机（虚拟机池内分离 的虚拟机状态为运行）<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  选中该列表显示的磁盘，点击菜单内的Move<br/><br/>4.  在Move Disk（s）,下选择目标Data Domain<br/><br/>5.  点击OK<br/><br/>|不能迁移，运行虚拟机不能迁移||测试迁移磁盘功能 虚拟机池内分离的虚拟机状态为运行状态的虚拟机|
|165|Move数据域之间磁盘迁移（前提：该数据中心下至少有两 个Data Domain）<br/><br/>1.  在虚拟机列表下，指定虚拟机（模板创建的虚拟 机）<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  选中该列表显示的磁盘，点击菜单内的Move<br/><br/>4.  在Move Disk（s）,下选择目标Data Domain<br/><br/>5.  点击OK<br/><br/>|磁盘迁移成功|||
|166|Move数据域之间磁盘迁移（前提：该数据中心下至少有两 个Data Domain）<br/><br/>1.  在虚拟机列表下，指定虚拟机（从快照创建的虚 拟机）<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  选中该列表显示的磁盘，点击菜单内的Move<br/><br/>4.  在Move Disk（s）,下选择目标Data Domain<br/><br/>5.  点击OK<br/><br/>|迁移成功|||
|167|Edit 虚拟机磁盘<br/><br/>1.  在虚拟机列表下，指定虚拟机<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  在Disk列表下选中Disk<br/><br/>4.  点击菜单内的Edit，设置完毕后点击OK<br/><br/>|磁盘编辑完成|||
|168|Remove虚拟机磁盘（关闭状态的虚拟机）<br/><br/>1.  在虚拟机列表下，指定虚拟机<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  在Disk列表下选中Disk<br/><br/>4.  点击菜单内的Remove，在Remove Disk（s）框选 中Remove permanently<br/><br/>5.  点击OK<br/><br/>|磁盘删除成功|||
|169|Active虚拟机磁盘（虚拟机磁盘为非Active状态）<br/><br/>1.  在虚拟机列表下，指定虚拟机<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  在Disk列表下选中Disk<br/><br/>4.  点击菜单内的Active<br/><br/>|磁盘被激活|||
|170|Deactive虚拟机磁盘<br/><br/>1.  在虚拟机列表下，指定虚拟机<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  在Disk列表下选中Disk<br/><br/>4.  点击菜单内的Deactive<br/><br/>|使磁盘无效，标志变为Inactive|||
|171|Scan Alignment虚拟机磁盘<br/><br/>1.  在虚拟机列表下，指定虚拟机<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  在Disk列表下选中Disk，将磁盘Deactive<br/><br/>4.  右键该磁盘，选择菜单内的Scan Alignment<br/><br/>|||不确定此功能在什么情况下使用 虚拟机关机磁盘变为Inactive状态下也不可点 目前只有数据中心宕掉后的虚拟机此项可点|<br/>|80.1|磁盘热添加<br/><br/>1.  在虚拟机列表, 指定运行的虚拟机.<br/><br/>2.  在该虚拟机详细面板下点击磁盘.<br/><br/>3.  点击添加.<br/><br/>4.  设置磁盘大小, 点击确定.<br/><br/>5.  选中添加的磁盘, 点击激活.<br/><br/>|在磁盘列表上多了一个磁盘, 登陆进虚拟机, 可以看到虚拟机里多了一个磁盘.|||<br/>|80.2|磁盘热删除<br/><br/>1.  在虚拟机列表, 指定运行的虚拟机.<br/><br/>2.  在该虚拟机详细面板下点击磁盘.<br/><br/>3.  选中待删除的磁盘, 点击取消激活.<br/><br/>4.  点击删除<br/><br/>5.  在弹出的窗口上选中永久性的删除, 点击确定.<br/><br/>|在磁盘列表上该磁盘消失了, 登陆进虚拟机, 相关的磁盘显示被拔出.|||
|172|创建共享磁盘（Internal）<br/><br/>1.  在虚拟机列表下，指定某一虚拟机<br/><br/>2.  在该虚拟机详细面板下点击Disks<br/><br/>3.  点击Add，选择Internal,填充磁盘大小，描述等 信息，设置共享<br/><br/>4.  点击OK，磁盘创建完成，会有一个小手的标志代 表是共享磁盘<br/><br/>5.  在虚拟机列表下，指定其他虚拟机<br/><br/>6.  在该虚拟机详细面板下点击Disks<br/><br/>7.  点击Add，在Add Virtual Disk，选中 Attach<br/>    Disk，在显示磁盘列表下选中共享磁盘， 点击OK<br/><br/>8.  磁盘共享给该虚拟机<br/><br/>|磁盘实现共享|||<br/>|81.1|虚拟机关机下磁盘动态扩容<br/><br/>1.  在虚拟机列表下，指定某一处于关机状态的虚拟机<br/><br/>2.  在该虚拟机详细面板下点击 Disks<br/><br/>3.  选中要扩容的磁盘, 点击编辑.<br/><br/>4.  在弹出的编辑窗口中, 在扩展大小(GB)中填写需要增加的磁盘容量<br/><br/>5.  点击确定保存退出<br/><br/>6.  在该虚拟机的磁盘列表下, 查看该磁盘的虚拟大小.<br/><br/>7.  打开虚拟机, 并登陆, 查看磁盘的大小(linux 可以用 fdisk 查看)<br/><br/>|在磁盘列表下虚拟大小变为扩容后的大小, 登陆虚拟机查看磁盘大小变为扩容后的大小.||要想完整使用该功能, 必须在虚拟机内部使用分区扩容工具扩展磁盘分区(比如 linux 上的 resize2fs 和 gparted, windows 上的分区魔术师等)|<br/>|81.2|虚拟机开机下磁盘动态扩容<br/><br/>1.  在虚拟机列表下，指定某一处于开机状态的虚拟机<br/><br/>2.  在该虚拟机详细面板下点击 Disks<br/><br/>3.  选中要扩容的磁盘, 点击编辑.<br/><br/>4.  在弹出的编辑窗口中, 在扩展大小(GB)中填写需要增加的磁盘容量<br/><br/>5.  点击确定保存退出<br/><br/>6.  在该虚拟机的磁盘列表下, 查看该磁盘的虚拟大小.<br/><br/>7.  登陆虚拟机, 查看磁盘的大小(linux 可以用 fdisk 查看)<br/><br/>|在磁盘列表下虚拟大小变为扩容后的大小, 登陆虚拟机查看磁盘大小变为扩容后的大小.||要想完整使用该功能, 必须在虚拟机内部使用分区扩容工具扩展磁盘分区(比如 linux 上的 resize2fs 和 gparted, windows 上的分区魔术师等)|

