# 创建一个新角色

| **用例编号** | **测试目的** | **测试步骤** | **预期结果** | **实际结果** | **备注** |
| ------------ | ------------ | ------------ | ------------ | ------------ | -------- |
| 0000000 | 验证【新建角色】中的【名称】选项是新建角色时的比填项。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，直接点击【确定】。 | 该窗口没有正常关闭，【名称】输入框变成了红色，将鼠标移至【名称】的输入框时，会提示：**该字段不能为空**。 | 与预期结果一致。 |
| 0000001 | 验证【新建角色】中【名称】输入框中最多可输入 126 个字符，另外名称必须以字母、数字或者'_'开头。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，在名称输入框中输入 **!@#$%^&**，点击【确定】。 |该窗口没有正常关闭，【名称】输入框变成了红色，将鼠标移至【名称】的输入框时，会提示：**名称必须最多为 126 个字符且以任何非符号字符开始**。 | 与预期结果一致。 |
| 0000002 | 验证【新建角色】中【名称】输入框中只能包含下面这些字符：**'A-Z', 'a-z', '0-9', '_' or '-'**。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，在名称输入框中输入 **a!@#$%^&**，点击【确定】。 | 该窗口没有正常关闭，【名称】输入框变成了红色，将鼠标移至【名称】的输入框时，会提示：**名称只能包含 'A-Z', 'a-z', '0-9', '_' 或 '-'。 | 与预期结果一致。 |
| 0000003 | 验证【新建角色】中【描述】输入框中最多可输入 4000 个字符。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，输入名称。<br/>4. 在【描述】旁边的输入框中输入 4001 个字符，点击【确定】。 | 该窗口没有正常关闭，【描述】输入框变成了红色，将鼠标移至【描述】的输入框时，会提示：**字段内容不得超过 4000 个字符。** | 与预期结果一致。 |
| 0000004 | 验证用户或者管理员的角色中只有在具备【登录权限】的情况下，才能登录到用户门户或者管理员门户。 | 测试条件：在目录服务器中创建用户 **Tester**。<br/>1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，输入名称 **test_ManipulatePermissions**。<br/>4. 在【帐号类型】的复选框中选择【用户】，点击下面的【展开所有】，勾选【Manipulate 权限】，点击【确定】。<br/>5. 在左边的标签栏中选择【系统权限】，点击【添加】按扭。<br/>6. 在对应的目录服务器中搜索，勾选 Tester，并在【要分配的角色】这个下拉菜单中选择【test_ManipulatePermissions】，点击【确定】。<br/>7. 打开用户门户，输入 Tester 的用户名和密码以及相应的目录服务器进行登录。 | 页面上弹出错误提示：**没有授权用户执行这个动作。 | 与预期结构一致。 |
| 0000005 | 验证在某用户被分配的角色中不具有【Manipulate 权限】的话是不可以添加、删除**非 Admin 角色**的权限的。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，输入名称 **test_ManipulatePermissions** 。<br/>4. 在【帐号类型】的复选框中选择【用户】，点击下面的【展开所有】，勾选【登录权限】和【虚拟机】下的所有权限（仅选【登录权限】是看不到虚拟机的，同时选择【虚拟机权限】可以更好的体现出该测试用例的用意。），点击【确定】。<br/>5. 点击【虚拟机】标签，在虚拟机列表中选择一台虚拟机，在该虚拟机的【权限】子选项卡中点击【添加】，此时会弹出【为用户添加权限】的窗口。<br/>6. 选择相应的目录服务器，点击【go】，页面上没有显示出任何用户。 | 无法为用户添加权限。 | 与预期结果一致。 | 
| 0000006 | 验证用户被分配的角色中如果具有【Manipulate 权限】是可以添加、删除**非 Admin 角色**的权限。 | 勾选【Manipulate 权限】和【登录权限】，点击【确定】。<br/>5. 点击【虚拟机】标签，在虚拟机列表中选择一台虚拟机，在该虚拟机的【权限】子选项卡中点击【添加】，此时会弹出【为用户添加权限】窗口，在下拉列表中选择相应的【目录服务器】，点击【go】，此时会列出目录服务器中的所有用户的列表。<br/>6. 任选一个用户，在【要分配的角色】中选择非 Admin 的角色，例如 【UserRole】，点击【确定】。 | 【为用户添加权限】窗口自动关闭，刚刚创建的那个权限会自动出现在该虚拟机的权限列表中。 | 与预期结果一致。 |
| 0000007 | 验证在具有【在添加权限时从目录服务器中添加用户和组】角色的用户可以  |
| 0000008 | 验证不具有【为虚拟机分配 vNIC 配置】权限的用户是不能够为虚拟机分配虚拟网卡的。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，输入名称 **test_AssignVnicProfileToVm_N**，在【帐号类型】中选择【用户】。<br/>4. 点击【展开所有】按扭，勾选【登录权限】和【虚拟机】，然后点击【确定】。<br/>5. 点击左侧的标签栏中点击【系统权限】，点击【添加】，此时会弹出【为用户添加权限】的窗口。<br/>6. 选择相应的目录服务器，点击【go】，在用户列表中勾选某一用户（Tester1），在【要分配的角色】这个下拉菜单中选择【test_AssignVnicProfileToVm_N】，点击【确定】。<br/>7. 打开用户门户，输入 Tester1 的用户名和密码以及相应的目录服务器进行登录。<br/>8. 登录成功后，点击【扩展视图】，在虚拟机列表中任选一台虚拟机，点击该虚拟机【网络接口】子标签，在点击【新建】为该虚拟机新建一个虚拟网卡，此时会弹出【新建网络接口】窗口，在【名称】中输入相应的虚拟网卡的名称，点击【确定】。 | 此时会弹出【！操作被取消】窗口，并提示：**没有授权用户执行这个动作。**。 | 与预期结果一致。 |
| 0000009 | 验证只有具有【为虚拟机分配 vNIC 配置】权限的用户才可以为虚拟机分配虚拟网卡。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，输入名称 **test_AssignVnicProfileToVm**，在【帐号类型】中选择【用户】。<br/>4. 点击【展开所有】按扭，勾选【登录权限】，【为虚拟机分配 vNIC 配置】和【虚拟机】，点击【确定】。<br/>5. 点击左侧标签栏中的【系统权限】，点击【添加】，此时会弹出【为用户添加权限】的窗口。<br/>6. 选择相应的目录服务器，点击【go】，在用户列表中勾选某一用户（Tester2），在【要分配的角色】这个下拉菜单中选择【test_AssignVnicProfileToVm】，点击【确定】。<br/> 7. 打开用户门户，输入 Tester1 的用户名和密码以及相应的目录服务器进行登录。<br/>8. 登录成功后，点击【扩展视图】，在虚拟机列表中任选一台虚拟机，点击该虚拟机【网络接口】子标签，在点击【新建】为该虚拟机新建一个虚拟网卡，此时会弹出【新建网络接口】窗口，在【名称】中输入相应的虚拟网卡的名称，点击【确定】。 | 【新建网络接口】窗口自动关闭，刚刚创建的网络接口出现在接口列表中。 | 与预期结果一致。 | | 
| 0000010 | 验证不具有【为模版分配 vNIC 配置】权限的用户是不能够为模版分配虚拟网卡的。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，输入名称 **test_AssignVnicProfileToTemplate_N**，在【帐号类型】中选择【用户】。<br/>4. 点击【展开所有】按扭，勾选【登录权限】和【模板】，然后点击【确定】。<br/>5. 点击左侧的标签栏中点击【系统权限】，点击【添加】，此时会弹出【为用户添加权限】的窗口。<br/>6. 选择相应的目录服务器，点击【go】，在用户列表中勾选某一用户（Tester5），在【要分配的角色】这个下拉菜单中选择【test_AssignVnicProfileToTemplate_N】，点击【确定】。<br/>7. 打开用户门户，输入 Tester5 的用户名和密码以及相应的目录服务器进行登录。<br/>8. 登录成功后，点击【扩展视图】，在左侧的选项卡中选择【模板】，在模板列表中选择**非 Blank**的模板，选择【网络接口】子标签，点击【新建】，为该模板新建一个虚拟网卡，此时会弹出【新建网络接口】窗口，在【名称】中输入相应的虚拟网卡的名称，点击【确定】。 | 此时会弹出【！操作被取消】窗口，并提示：**没有授权用户执行这个动作。**。 | 与预期结果一致。 |
| 0000011 | 验证只有具有【为模板分配 vNIC 配置】权限的用户才可以为模板分配虚拟网卡。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，输入名称 **test_AssignVnicProfileToTemplate**，在【帐号类型】中选择【用户】。<br/>4. 点击【展开所有】按扭，勾选【登录权限】，【为模板分配 vNIC 配置】，点击【确定】。<br/>5. 点击左侧标签栏中的【系统权限】，点击【添加】，此时会弹出【为用户添加权限】的窗口。<br/>6. 选择相应的目录服务器，点击【go】，在用户列表中勾选某一用户（Tester5），在【要分配的角色】这个下拉菜单中选择【test_AssignVnicProfileToTemplate】，点击【确定】。<br/> 7. 打开用户门户，输入 Tester5 的用户名和密码以及相应的目录服务器进行登录。<br/>8. 登录成功后，点击【扩展视图】，在左侧的选项卡中选择【模板】，在模板列表中选择**非 Blank**的模板，点击【网络接口】子标签，在点击【新建】为该模板新建一个虚拟网卡，此时会弹出【新建网络接口】窗口，在【名称】中输入相应的虚拟网卡的名称，点击【确定】。 | 【新建网络接口】窗口自动关闭，刚刚创建的网络接口出现在接口列表中。 | 与预期结果一致。 |
| 0000012 | 验证不具有模板的【编辑属性】权限的用户是不能够编辑模板的。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，输入名称 **test_TemplateEditProperties_N**，在【帐号类型】中选择【用户】。<br/>4. 点击【展开所有】按扭，勾选【登录权限】和【Provisioning 操作】，点击【确定】。<br/>5. 点击左侧标签栏中的【系统权限】，点击【添加】，此时会弹出【为用户添加权限】的窗口。<br/>6. 选择相应的目录服务器，点击【go】，在用户列表中勾选某一用户(Tester6)，在【要分配的角色】下拉菜单中选择【test_TemplateEditProperties_N】，点击【确定】。<br/>7. 打开用户门户，输入 Tester6 的用户名密码以及相应的目录服务器进行登录。<br/>8. 登录成功后，点击【扩展视图】，在左侧的选项卡中选择【模板】，在模板列表中选择**非 Blank**的模板，点击【编辑】，此时会弹出【编辑模板】窗口，在【名称】中写入新的模板名称，点击【确定】。 | 此时会弹出【！操作被取消】窗口，并提示：**没有授权用户执行这个动作。**。 | 与预期结果一致。|
| 0000013 | 验证只有具有模板的【编辑属性】权限的用户才可以编辑模板。 | 1. 点击管理端右上方的【配置】，此时会弹出【配置】窗口。<br/>2. 在左边的标签栏中选择【角色】，你会进入到角色页面。<br/>3. 点击【新建】按扭，此时会弹出【新建角色】窗口，输入名称 **test_TemplateEditProperties**，在【帐号类型】中选择【用户】。<br/>4. 点击【展开所有】按扭，勾选【登录权限】和【Provisioning 操作】，点击【确定】。<br/>5. 点击左侧标签栏中的【系统权限】，点击【添加】，此时会弹出【为用户添加权限】的窗口。<br/>6. 选择相应的目录服务器，点击【go】，在用户列表中勾选某一用户(Tester7)，在【要分配的角色】下拉菜单中选择【test_TemplateEditProperties】，点击【确定】。<br/>7. 打开用户门户，输入 Tester7 的用户名密码以及相应的目录服务器进行登录。<br/>8. 登录成功后，点击【扩展视图】，在左侧的选项卡中选择【模板】，在模板列表中选择**非 Blank**的模板，点击【编辑】，此时会弹出【编辑模板】窗口，在【名称】中写入新的模板名称，点击【确定】。 | 【编辑模板】窗口自动关闭，模板的名称已被更新。 | 与预期结果一致。 |
| 0000014 | 验证不具有模板的【创建】权限的用户是不能够创建模板的。 |
| 0000015 | 验证只有具有模板的【创建】权限的用户才能够创建模板。 |
| 0000016 | 验证不具有模板的【删除】权限的用户是不能够删除模板的。 | 
| 0000017 | 验证只有具有模板的【删除】权限的用户才能够删除模板的。 |
| 0000018 | 验证不具有模板的【复制】权限的用户不能够复制模板。 |
| 0000019 | 验证只有具有模板的【复制】权限的用户才能够复制模板。 |
| 0000020 | 验证不具有虚拟机的【基本操作】权限的用户不能对虚拟机进行基本操作（例如：运行、运行一次、关闭、停止、暂停、重启、主机 USB 挂载、主机 USB 卸载）。 |  
| 0000021 | 验证只有具有虚拟机的【基本操作】权限的用户才能对虚拟机进行基本操作（例如：运行、运行一次、关闭、停止、暂停、重启、主机 USB 挂载、主机 USB 卸载）。 |
| 0000022 | 验证不具有虚拟机的【更换 CD】权限的用户不能为虚拟机更换 CD。 |
| 0000023 | 验证只有具有虚拟机的【更换 CD】权限的用户才能为虚拟机更换 CD。 |
| 0000024 | 验证不具有虚拟机的【远程登录】权限的用户不能远程登录虚拟机的。 |
| 0000025 | 验证只有具有虚拟机的【远程登录】权限的用户才能远程登录虚拟机。 |
| 0000026 | 验证不具有虚拟机的【编辑属性】权限的用户不能编辑虚拟机。 |
| 0000027 | 验证只有具有虚拟机的【编辑属性】权限的用户才能编辑虚拟机。 |
| 0000028 | 验证不具有虚拟机的【创建】权限的用户不能够创建虚拟机。 |
| 0000029 | 验证只有具有虚拟机的【创建】权限的用户才能创建虚拟机。 |
| 0000030 | 验证不具有虚拟机的【创建实例】权限的用户不能够为虚拟机创建实例。 |
| 0000031 | 验证只有具有虚拟机的【创建实例】权限的用户才能为虚拟机创建实例。 |
| 0000032 | 验证不具有虚拟机的【删除】权限的用户不能够删除虚拟机。 |
| 0000033 | 验证只有具有虚拟机的【删除】权限的用户才能删除虚拟机。 |
| 0000034 | 验证不具有虚拟机的【编辑存储】权限的用户不能编辑虚拟机。 |
| 0000035 | 验证只有具有虚拟机的【编辑存储】权限的用户才能编辑虚拟机。 |
| 0000036 | 验证不具有虚拟机的【编辑快照】权限的用户不能编辑虚拟机。 |
| 0000037 | 验证只有具有虚拟机的【编辑快照】权限的用户才能编辑虚拟机。 |
| 0000038 | 验证不具有虚拟机的【移动虚拟机】权限的用户不能移动虚拟机。 |
| 0000039 | 验证只有具有虚拟机的【移动虚拟机】权限的用户才能移动虚拟机。 |
| 0000040 | 验证不具有虚拟机的【迁移】权限的用户不能迁移虚拟机。 |
| 0000041 | 验证只有具有虚拟机的【迁移】权限的用户才能迁移虚拟机。 |
| 0000042 | 验证不具有虚拟机的【覆盖打开的控制台会话】权限的用户不能覆盖虚拟机的已打开的控制台会话。 |
| 0000043 | 验证只有具有虚拟机的【覆盖打开的控制台会话】权限的用户才能覆盖虚拟机的已打开的控制台会话。 |
| 0000044 | 验证不具有虚拟机池的【基本的操作】权限的用户不能对虚拟机池进行基本的操作。 |
| 0000045 | 验证只有具有虚拟机池的【基本的操作】权限的用户才能对虚拟机池进行基本的操作。 |
| 0000046 | 验证不具有虚拟机池的【创建】权限的用户不能创建虚拟机池。 |
| 0000047 | 验证只有具有虚拟机池【创建】权限的用户才能创建虚拟机池。 |
| 0000048 | 验证不具有虚拟机池的【删除】权限的用户不能删除虚拟机池。 |
| 0000049 | 验证只有具有虚拟机池【删除】权限的用户才能删除虚拟机池。 |
| 0000050 | 验证不具有虚拟机池的【编辑属性】权限的用户不能编辑虚拟机池。 |
| 0000051 | 验证只有具有虚拟机池【编辑属性】权限的用户才能编辑虚拟机池。 |
| 0000052 | 验证不具有磁盘的【创建】权限的用户不能为虚拟机创建磁盘。 |
| 0000053 | 验证只有具有磁盘的【创建】权限的用户才能为虚拟机创建磁盘。 |
| 0000054 | 验证不具有磁盘的【删除】权限的用户不能删除虚拟机磁盘。 |
| 0000053 | 验证只有具有磁盘的【删除】权限的用户才能删除虚拟机磁盘。 |
| 0000054 | 验证不具有磁盘的【编辑存储】权限的用户不能编辑

