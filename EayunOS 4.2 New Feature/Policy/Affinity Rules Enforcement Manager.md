# Affinity Rules Enforcement Manager

* 概述

该篇将要介绍的是一个给运行的虚拟机强制添加关联规则的管理器。该管理器将会定期检查每个集群是否存在关联规则冲突的问题，如果发现相关问题，会采取迁移问题虚拟机的方式解决关联冲突的问题。

* 测试

1. 集群被创建，管理器即被创建
   * 启动时创建管理器
     1. 开启 engine
     2. 从日志信息中检查 ARES 是否为默认集群创建了 PerCluster 对象。
 
   * 在新的集群上创建管理器
     1. 创建新的集群
     2. 从日志信息中检查 ARES 是否为新的集群创建了 PerCluster 对象。

   * 被删除集群的管理器删除
     1. 删除集群
     2. 从日志信息中检查 ARES 是否为已被删除的集群删除。
  
2. 管理器时间间隔检查
   * 检查规律的时间间隔
   * 检查长时间的时间间隔

3. 管理器强制关联规则

4. 候选关联规则检查

5. 平衡竞争的管理器

