# 安装EayunOS虚拟化基础系统

|用例编号|测试目的|操作|预期结果|实际结果|备注|
|--------|--------|----|--------|--------|----|
|72      |安装Manage|<ol><li>安装eayunOS-20140320163644-x86\_64-DVD.iso</li><li>若dhcp没有获取ip地址成功，则配置静态ip</li><li>修改/etc/reslov.conf文件内容如下<code> ;generated by /sbin/dhclient-script nameserver 219.234.181.239</code></li><li>修改本地Hosts 文件<code>vi /etc/hosts</code> 添加 engine的ip engine的hostname</li><li>engine-setup (VDSM 项选择yes,配置过程中配置项设置不同选项会有什么效果)</li></ol>|打开http://engine-ip可以看见搭建好的环境|||
|73      |安装Host|<ol><li>安装eayunos-node-iso-3.3-1.iso</li><li>安装界面中选择“Install or Upgrade” 按“Enter”键</li><li>选择“Install Hypervisor 3.1.0-0.999.456.e16 ” 按“Enter”键</li><li>选择“U.S.English” 按“Enter”键</li><li>选择“Location Device Name Size” 按“Continue”</li><li>在Storage Volumes 按“Next”</li><li>输入Password及Confirm Password 按“Install”</li><li>等待安装，安装完成后重启，进入Console界面</li><li>在Console界面下配置Network项，设置Hostname(ovirt-test1.eayun.com)设置DNS Server 1(8.8.8.8),配置网卡IPv4 选择Static（IP Address，Netmask,Gateway）按“save”</li><li>在Console界面下配置oVirt Engine项，设置Management Server(192.168.176.188),Management Server Port(这里设置了80，设置443有bug)</li></ol>|host安装好后可以自动在engine上显示出来，同时也可以在engine界面添加该host|||
|74      |连接到虚拟化管理平台|<ol><li>打开浏览器，输入http://ip.com(http://192.168.176.91)在门户（Portal）标题下，点击【管理员门户】</li><li>如果是首次访问该网站，EayunOS管理系统将对浏览器进行安全认证，点击继续浏览此网站，显示门户登录界面</li><li>输入用户名、密码及域（这里我们输入admin、abc123、internal），点击【登录】</li></ol>|成功登录了EayunOS虚拟化管理系统|||
|75      |在EayunOS虚拟化管理平台批准安装的Host|<ol><li>在EayunOS虚拟化管理平台树形面板点击【展开所有】按键，在默认的集群下，点击主机项，主机列表下显示可用的EayunOS Hypervisor（host）</li><li>选择你安装的hypervisor,点击菜单内的【批准】（Approve）按键，显示【Edit and Approve Host】对话框，点击【确定】</li><li>提示配置电源管理，在这里可以设置也可以不设置，点击【继续】，完成后主机状态从Non Operational-\>Up</li></ol>|批准的主机状态从Non Operational-\>Up|||
|76      |配置网络|<ol><li>添加一个新的逻辑网络</li><li>在OVIRTMANAGER树形面板中点击【展开所有】（Expand All）按钮，在默认集群下，点击“网络”项</li><li>点击“新建”按钮，填写“名称”、 “描述”，取消“虚拟机网络”选择项。“集群”选项卡中，将默认集群附加到新建的逻辑网络</li><li>点击“确定”按钮，完成逻辑网络的添加</li><li>将新建的逻辑网络附加到主机</li><li>对集群中所有的可用的主机，在下方面板中选择“网络接口”选项卡，点击“设立主机网络”按钮</li><li>在“设立主机网络”对话框中，将右侧“未分配的逻辑网络”中新建立的逻辑网络，拖动到左侧和指 定网卡对应的“未分配网络”之中</li><li>在新建立的逻辑网络上，点击铅笔形状的编辑按钮，开始设置网络参数</li><li>网络参数设置完成之后，回到 “设立主机网络”对话框，勾选“包括网络配置”选项，点击“确定”按钮完成配置</li><li>点击“确定”按钮，完成逻辑网络的添加</li></ol>|新的逻辑网络创建成功，附加在该网络的host和存储可以使用这一网络互相通信。|||
|77      |配置存储（创建NFS存储）|<ol><li>在EayunOS虚拟化管理平台树形面板点击【展开所有】按键，在默认的数据中心下点击【存储】</li><li>可用的存储域显示在列表下，点击【新建域】，显示新建域对话框，配置以下选项：名称、数据中心、存储类型：Data/NFS、使用的主机、输出路径（如：192.168.176.157:/home/export）点击【确定】，新建的存储域显示在存储列表内，状态由Locked-\>Active</li></ol>|存储域创建成功|||
|78      |配置存储（创建iscsi存储）|<ol><li>在EayunOS虚拟化管理平台树形面板点击【展开所有】按键，在默认的数据中心下点击【存储】</li><li>可用的存储域显示在列表下，点击【新建域】，显示新建域对话框，配置以下选项：名称、数据中心、存储类型：Data/iSCSI、使用的主机、连接目标iSCSI存储，输入地址、端口号、用户认证，点击发现（Discover），iSCSI存储显示在列表里</li><li>选择存储后点击进入，点击【确定】，新建的存储域显示在存储列表内，状态由Locked-\>Active</li></ol>|存储域创建成功|||
|79      |配置存储（创建ISO存储）|<ol><li>在EayunOS管理平台树形面板先点击【展开所有】按键，点击本地存储数据中心，显示数据中心列表，选择数据中心</li><li>在该数据中心详细面板下，选择存储列表，点击【新建ISO】按键,在Attach ISO Library对话框下选择本地ISO域，点击OK</li><li>ISO域显示在存储列表内，同时状态为活跃（Active）</li></ol>|ISO域创建成功|||
|80      |向ISO域上传镜像文件|<ol><li>使用engine-iso-loader工具上传ISO（如：engine-iso-loader --iso-domain=ISO\_DOMAIN upload /tmp/CentOS-6.5-x86\_64-LiveDVD.iso）</li></ol>|上传镜像成功|||

