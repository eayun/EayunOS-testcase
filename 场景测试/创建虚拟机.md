# 创建虚拟机

|用例编号|操作|预期结果|实际结果|备注|
|--------|----|--------|--------|----|
|1|前提条件：虚拟化平台至少有一个Host及ISO domain<br/><br/>1.  登录虚拟化系统，在左侧树形面板下点击 Expand<br/>    All,选择Default数据中心下Default 集群下点击VMs,<br/>    在右侧虚拟机列表下点击菜 单栏内的NewVM,输入名称、内存大小、选择<br/>    操作系统为RedHat Enterprise Linux6.X X64、其他项保持默认设置，点击OK<br/><br/>2.  弹出“New Virtual Machine-Guide Me”窗<br/>    口，提示配置虚拟机磁盘，设置磁盘大小，<br/>    网络接口默认VirtIO，点击OK（根据需要可 以再添加磁盘）点击configure<br/>    Later，创建<br/>    的虚拟机显示在虚拟机列表下,runonce运行虚拟机，安装操作系统。<br/><br/>3.  安装完操作系统后，安装 spice-guest-tools 工具<br/><br/>|创建的虚拟机成功，虚拟机可以正常使用|||
|2|前提：虚拟化平台至少有一个Host及ISO domain 创建Windows虚拟机（win7 64）<br/><br/>1.  登录虚拟化系统，在左侧树形面板下点击 Expand<br/>    All,选择Default数据中心下Default 集群下点击VMs,<br/>    在右侧虚拟机列表下点击菜 单栏内的New VM,输入名称、内存大小、选择<br/>    操作系统为windows7 X64、Optimized for项<br/>    选择Desktop其他项保持默认设置，点击OK<br/><br/>2.  弹出“New Virtual Machine-Guide Me”窗<br/>    口，提示配置虚拟机磁盘，设置磁盘大小，<br/>    网络接口默认VirtIO，点击OK（根据需要可 以再添加磁盘）点击configure<br/>    Later，创建<br/>    的虚拟机显示在虚拟机列表下,runonce运行虚拟机，安装操作系统<br/>    （安装到选择自定义项时在管理平台上<br/>    changeCD添加驱动，回到安装界面刷新界面<br/>    可以看到安装的磁盘，再到管理平台<br/>    changeCD加载系统安装盘，开始正常安装操 作系统）<br/><br/>3.  安装完操作系统后，安装RHEV-toolsSetup工具<br/><br/>|创建的虚拟机成功，虚拟机可以正常使用|||
|3|前提：虚拟化平台至少有一个Host及ISO domain 已经创建一个CentOS Linux server 创建CentOS Linux Templates<br/><br/>1.  启动虚拟机.<br/><br/>2.  sealing 虚拟机, 步骤如下:<br/><br/>    1.  用 ssh 或者 console 登陆虚拟机.<br/><br/>    2.  创建标记文件:<br/><br/>                                                  # touch /.unconfigured<br/>                                                <br/><br/>    3.  删除 ssh host keys:<br/><br/>                                                  # rm -rf /etc/ssh/ssh_host_*<br/>                                                <br/><br/>    4.  在文件 /etc/sysconfig/network 中设置<br/>        HOSTNAME=localhost.localdomain in.<br/><br/>                                                <br/><br/>    5.  删除 MAC 地址配置文件 /etc/udev/rules.d/70-\*.<br/><br/>                                                  # rm -rf /etc/udev/rules.d/70-*<br/>                                                <br/><br/>    6.  在文件 /etc/sysconfig/network-scripts/ifcfg-eth\* 中, 删除<br/>        HWADDR=的行.<br/><br/>3.  选中该虚拟机, 点击菜单栏 新建模板, 在弹出的新建模板 窗口中输入名称,<br/>    复制虚拟机权限, 其他保留默认, 点击 OK.<br/><br/>|虚拟机状态由Image Locke-\>Down 在Template列表下显示创建的模板状态由Locked-\>OK|||
|4|前提：虚拟化平台至少有一个Host及ISO domain 已经创建一个Windows虚拟机 创建windows Templates<br/><br/>1.  关闭虚拟,确保虚拟机状态Down<br/><br/>2.  Sealing 虚拟机（Linux/Windows参照文档 Administration Guide）<br/><br/>3.  选中该虚拟机，点击菜单栏Make Template， 在弹出的“New<br/>    Template”输入名称，设置“允 许所有用户访问该模板”及“复制虚拟机权<br/>    限”，点击OK<br/><br/>|虚拟机状态由Image Locke-\>Down 在Template列表下显示创建的模板状态由Locked-\>OK|||
|5|前提：虚拟化平台至少有一个Host及ISO domain 已经创建一个Red Hat Enterprise Linux 模板 使用模板克隆一个Red Hat Enterprise Linux虚拟机<br/><br/>1.  登录虚拟化系统，在左侧树形面板下点击 Expand<br/>    All,选择Default数据中心下Default 集群下点击VMs,<br/>    在右侧虚拟机列表下点击菜 单栏内的New VM<br/><br/>2.  在“General”下“Based on Template”列表里<br/>    选择刚创建的模板，输入名称及描述，其他<br/>    值默认如果有需要可以修改这些默认值<br/><br/>3.  点击Resource Allocation的“Template Provisioning”下选择“clone”<br/><br/>4.  点击Run绿色箭头，运行虚拟机，连接进入虚 拟机<br/><br/>|虚拟机创建成功可以连接，正常使用|||
|6|前提：虚拟化平台至少有一个Host及ISO domain 已经创建一个windows 模板 使用模板克隆一个windows虚拟机<br/><br/>1.  登录虚拟化系统，在左侧树形面板下点击 Expand<br/>    All,选择Default数据中心下Default 集群下点击VMs ,<br/>    在右侧虚拟机列表下点击 菜单栏内的New VM<br/><br/>2.  在“General”下“Based on Template”列表里<br/>    选择刚创建的模板，输入名称及描述，其他<br/>    值默认如果有需要可以修改这些默认值<br/><br/>3.  点击Resource Allocation的“Template Provisioning”下选择“clone”<br/><br/>4.  点击Run绿色箭头，运行虚拟机，连接进入虚 拟机<br/><br/>|虚拟机创建成功可以连接，正常使用|||

