# 创建虚拟机

|用例编号|测试目的|操作|预期结果|实际结果|备注|
|--------|--------|----|--------|--------|----|
|1       |创建EL6虚拟机|<ul><li>前提条件：</li></ul><ol><li>虚拟化平台至少有一个Host及ISO domain</li></ol><ul><li>操作：</li></ul><ol><li>登录虚拟化系统，在左侧树形面板下点击 Expand All,选择Default数据中心下Default 集群下点击VMs，在右侧虚拟机列表下点击菜单栏内的NewVM，输入名称、内存大小、选择操作系统为RedHat Enterprise Linux6.X X64，其他项保持默认设置，点击OK</li><li>弹出“New Virtual Machine-Guide Me”窗口，提示配置虚拟机磁盘，设置磁盘大小，网络接口默认VirtIO，点击OK（根据需要可 以再添加磁盘）点击configure Later，创建的虚拟机显示在虚拟机列表下,runonce运行虚拟机，安装操作系统</li><li>安装完操作系统后，安装 spice-guest-tools 工具</li></ol>|创建的虚拟机成功，虚拟机可以正常使用|||
|2       |创建Windows7虚拟机|<ul><li>前提：</li></ul><ol><li>虚拟化平台至少有一个Host及ISO domain</li></ol><ul><li>操作：</li></ul><ol><li>登录虚拟化系统，在左侧树形面板下点击 Expand All,选择Default数据中心下Default 集群下点击VMs，在右侧虚拟机列表下点击菜单栏内的New VM，输入名称、内存大小、选择操作系统为windows7 X64，Optimized for项选择Desktop其他项保持默认设置，点击OK</li><li>弹出“New Virtual Machine-Guide Me”窗口，提示配置虚拟机磁盘，设置磁盘大小，网络接口默认VirtIO，点击OK（根据需要可 以再添加磁盘）点击configure Later，创建的虚拟机显示在虚拟机列表下,runonce运行虚拟机，安装操作系统（安装到选择自定义项时在管理平台上changeCD添加驱动，回到安装界面刷新界面可以看到安装的磁盘，再到管理平台changeCD加载系统安装盘，开始正常安装操 作系统）</li><li>安装完操作系统后，安装RHEV-toolsSetup工具</li></ol>|创建的虚拟机成功，虚拟机可以正常使用|||
|3       |创建基于EL6的模板：CentOS Linux Template|<ul><li>前提：</li></ul><ol><li>虚拟化平台至少有一个Host及ISO domain</li><li>已经创建一个CentOS Linux server</li></ol><ul><li>操作：</li></ul><ol><li>启动虚拟机</li><li>sealing 虚拟机，用 ssh 或者 console 登陆虚拟机</li><li>创建标记文件：<code>touch /.unconfigured</code></li><li>删除 ssh host keys:<code>rm -rf /etc/ssh/ssh_host_*</code></li><li>在文件 /etc/sysconfig/network 中设置HOSTNAME=localhost.localdomain</li><li>删除 MAC 地址配置文件 /etc/udev/rules.d/70-\* <code>rm -rf /etc/udev/rules.d/70-*</code></li><li>在文件 /etc/sysconfig/network-scripts/ifcfg-eth\* 中, 删除HWADDR=的行</li><li>选中该虚拟机, 点击菜单栏新建模板, 在弹出的新建模板窗口中输入名称,复制虚拟机权限, 其他保留默认, 点击 OK</li></ol>|虚拟机状态由Image Locke-\>Down 在Template列表下显示创建的模板状态由Locked-\>OK|||
|4      |创建Windows模板|<ul><li>前提：</li></ul><ol><li>虚拟化平台至少有一个Host及ISO domain</li><li>已经创建一个Windows虚拟机</li></ol><ul><li>操作：</li></ul><ol><li>关闭虚拟，确保虚拟机状态Down</li><li>Sealing 虚拟机（Linux/Windows参照文档 Administration Guide）</li><li>选中该虚拟机，点击菜单栏Make Template， 在弹出的“New Template”输入名称，设置“允许所有用户访问该模板”及“复制虚拟机权限”，点击OK</li></ol>|虚拟机状态由Image Locke-\>Down 在Template列表下显示创建的模板状态由Locked-\>OK|||
|5      |基于EL6模板创建一台虚拟机|<ul><li>前提：</li></ul><ol><li>虚拟化平台至少有一个Host及ISO domain</li><li>已经创建一个Red Hat Enterprise Linux 模板</li></ol><ul><li>操作：</li></ul><ol><li>登录虚拟化系统，在左侧树形面板下点击 Expand All，选择Default数据中心下Default 集群下点击VMs，在右侧虚拟机列表下点击菜单栏内的New VM</li><li>在“General”下“Based on Template”列表里选择刚创建的模板，输入名称及描述，其他值默认如果有需要可以修改这些默认值</li><li>点击Resource Allocation的“Template Provisioning”下选择“clone”</li><li>点击Run绿色箭头，运行虚拟机，连接进入虚 拟机</li></ol>|虚拟机创建成功可以连接，正常使用|||
|6      |基于Windows模板创建一台虚拟机|<ul><li>前提：</li></ul><ol><li>虚拟化平台至少有一个Host及ISO domain</li><li>已经创建一个windows 模板</li></ol><ol><li>登录虚拟化系统，在左侧树形面板下点击 Expand All,选择Default数据中心下Default集群下点击VMs ,在右侧虚拟机列表下点击 菜单栏内的New VM</li><li>在“General”下“Based on Template”列表里选择刚创建的模板，输入名称及描述，其他值默认如果有需要可以修改这些默认值</li><li>点击Resource Allocation的“Template Provisioning”下选择“clone”</li><li>点击Run绿色箭头，运行虚拟机，连接进入虚拟机</li></ol>|虚拟机创建成功可以连接，正常使用|||

